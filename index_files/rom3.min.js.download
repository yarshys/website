"use strict";!function(d){var n,i="https://devnull.perfops.net",t="https://rum-cdn.perfops.net/providers",r=3e5,c=3,s="test.resolver.perfops.net",p=3e5,o=2e4,a=6e4,u=3,l=15,f=6e4,h=3,g="desktop",m=Date.now(),b=S(16),e=-1!==function(){}.toString().indexOf("minified")?{logInfo:console.log,logError:console.error}:{logInfo:function(){},logError:function(){}},w=e.logInfo,v=e.logError,j=window.rum?window.rum.key:void 0;function U(n,e,t){g=t,h=Math.min(Math.max(function(n,e){return void 0!==window.rum&&void 0!==window.rum.config&&window.rum.config[e].repeats||n}(n,t),u),l),f=Math.min(Math.max(function(n,e){return void 0!==window.rum&&void 0!==window.rum.config&&window.rum.config[e].interval||n}(e,t),o),a)}function y(n){return Math.max(0,Number(n.toFixed(2)))}function E(r,n){var e=1<arguments.length&&void 0!==n?n:{},t=e.cb,o=void 0===t?function(){}:t,c=e.data,i=e.method,s=void 0===i?"GET":i,p=e.timeout,a=void 0===p?3e3:p;return new d(function(n,e){var t=new XMLHttpRequest;t.onload=function(){return n(t)},t.ontimeout=function(){e("timeout")},t.onerror=function(){var n="Unknown error happen when fetching ".concat(r);0!==t.status&&(n="Error happen when fetching ".concat(r,". Status ").concat(t.status,". Response: ").concat(t.statusText)),e(new Error(n))},t.open(s,r),t.timeout=a,o(t),t.send(c)})}function S(n){for(var e="abcdefghijklmnopqrstuvwxyz0123456789",t="",r=0;r<n;r++){var o=Math.floor(Math.random()*e.length);t+=e.charAt(o)}return t}function x(n){var e=n.interval?1e3*parseInt(n.interval):f;U(n.repeats?parseInt(n.repeats):h,e,n.mobile?"mobile":"desktop")}function k(){var e=0;setTimeout(function n(){(function(){var r="perfops-rum-clientdns",n=JSON.parse(window.localStorage.getItem(r));if(n&&n.expiry>Date.now())return d.resolve(n.data);for(var o=[],e=0;e<c;e++){var t="https://"+S(16)+"."+s;o.push(E(t))}return new d(function(e,t){d.all(o).then(function(n){var t=[];n.forEach(function(n){var e=JSON.parse(n.response);t.includes(e.resolver)||null===e.resolver||t.push(e.resolver)}),window.localStorage.setItem(r,JSON.stringify({data:t,expiry:Date.now()+p})),e(t)}).catch(function(n){t(n)})})})().then(function(c){(function(){var e="perfops-rum-resources",n=JSON.parse(window.localStorage.getItem(e));return n&&n.expiry>Date.now()?(n.config&&x(n.config),d.resolve(n.data)):E(t).then(function(n){return JSON.parse(n.response)}).then(function(n){if(!n||!n.data||!n.data.length)throw new Error("Empty response.data");return window.localStorage.setItem(e,JSON.stringify({data:n.data,config:n.config,expiry:Date.now()+r})),n.config&&x(n.config),n.data}).catch(function(){return[{id:76,cdnUrl:"https://cdnperf-test.innertest.top/500b-bench.jpg",p:0},{id:85,cdnUrl:"https://proxy.canary.scrubbingcenter.com/test_image.png",p:0},{id:66,cdnUrl:"https://vodstreaming01.video.globo.com/500b-bench.jpg",p:0},{id:65,cdnUrl:"https://live.video.globo.com/500b-bench.jpg",p:0},{id:84,cdnUrl:"https://ultrawaf.canary.scrubbingcenter.com/test_image.png",p:0},{id:55,cdnUrl:"https://perfops.s.llnwi.net/500b-bench.jpg",p:1},{id:87,cdnUrl:"https://test-perfops.ldgslb.com/500b-bench.jpg",p:1},{id:7,cdnUrl:"https://cpt96125.shopvoxpopulus.com/pics/500b-bench.jpg",p:1},{id:90,cdnUrl:"https://cdnperf.castway.net/500b-bench.jpg",p:0},{id:58,cdnUrl:"https://perfops-cds.s.llnwi.net/500b-bench.jpg",p:0},{id:3,cdnUrl:"https://perfops.cloudflareperf.com/500b-cf-bench.jpg",p:1},{id:10,cdnUrl:"https://akamai-cdn.perfops.io/500b-bench.jpg",p:1},{id:8,cdnUrl:"https://perfops.gcorelabs.com/500b-bench.jpg",p:1},{id:2,cdnUrl:"https://ovh-cdn.perfops.io/500b-bench.jpg",p:1},{id:74,cdnUrl:"https://test-perfops.haproxy.com/500b-bench.jpg",p:0},{id:78,cdnUrl:"https://medianova-multicdnperf.mncdn.com/500b-bench.jpg",p:0},{id:15,cdnUrl:"https://cdnperf-rum.cdnetworks.net/500b-bench.jpg",p:1},{id:89,cdnUrl:"https://25748s.ha.azioncdn.net/500b-az-bench.jpg",p:0},{id:5,cdnUrl:"https://d3888oxgux3fey.cloudfront.net/500b-bench.jpg",p:1},{id:9,cdnUrl:"https://1596384882.rsc.cdn77.org/500b-bench.jpg",p:1},{id:17,cdnUrl:"https://edgecast-perfops.azureedge.net/500b-bench.jpg",p:1},{id:77,cdnUrl:"https://cdnperf.qwilt.com/500b-bench.jpg",p:0},{id:20,cdnUrl:"https://cdnperf.cachefly.net/500b-bench.jpg",p:1},{id:14,cdnUrl:"https://perfops.r.worldssl.net/500b-bench.jpg",p:1},{id:72,cdnUrl:"https://rum.perfops.mdb.cdn.orange.com/500b-bench.jpg",p:0},{id:18,cdnUrl:"https://azure-perfops.azureedge.net/500b-bench.jpg",p:0},{id:11,cdnUrl:"https://perfops1.b-cdn.net/500b-bunny-bench.jpg",p:1},{id:12,cdnUrl:"https://cdn.jsdelivr.net/gh/jimaek/js-test@1.1/500b-bench.jpg",p:1},{id:40,cdnUrl:"https://perfops.swiftycdn.net/500b-sw-bench.jpg",p:0},{id:83,cdnUrl:"https://medianova-cdnperf.mncdn.com/500b-bench.jpg",p:1},{id:67,cdnUrl:"https://media-edge.1e100cdn.net/pics/500b-bench.jpg",p:0},{id:35,cdnUrl:"https://cdn81795137.blazingcdn.net/500b-blz-bench.jpg",p:1},{id:4,cdnUrl:"https://perfops-static.freetls.fastly.net/500b-bench.jpg",p:1},{id:75,cdnUrl:"https://cdnperf-rum.quantil.com/500b-bench.jpg",p:0}]})})().then(function(n){var e={ua:navigator.userAgent,hostname:window.location.hostname,client:j,clientdns:c,platform:g,timeElapsed:0,sessionId:"",version:3},t=[];performance.clearResourceTimings();function r(){var n=t.splice(0,t.length);return function(n){var e=0,t=0;return n.forEach(function(n){n.up?2e3<n.time&&e++:t++}),t+e<n.length}(n)?function(n,e){return n.timeElapsed=Math.round((Date.now()-m)/1e3),n.sessionId=b,E("".concat(i,"/rum/v1"),{data:JSON.stringify({metadata:n,data:e}),method:"POST"}).catch(v)}(e,n):n}function o(n){return!(n.time<3||3e3<n.time)&&(2<=t.push(n)?r():void 0)}return function(n,r){return n.reduce(function(n,t){return n.then(function(e){return r(t).then(function(n){return e.push(n),e})})},d.resolve([]))}(n,function(n){return function(n){var c="".concat(n.cdnUrl,"?t=").concat(Date.now()),e=new URL(c).hostname,i={id:n.id,domain:e,online:navigator&&void 0!==navigator.onLine?Number(navigator.onLine):-1};return E(c).then(function(n){var e=performance.getEntriesByName(c)[0],t=y(e.domainLookupEnd-e.domainLookupStart),r=y(e.connectEnd-e.connectStart),o=0<r?y(e.connectEnd-e.secureConnectionStart):0;return 200<=n.status&&n.status<300&&(i=Object.assign({},i,{up:1,status:n.status,time:Number((e.responseEnd-e.requestStart).toFixed(2)),dnsLookupTime:t,tcpTime:r,sslTime:o,headers:n.getAllResponseHeaders()})),300<=n.status&&n.status<=500&&(i=Object.assign({},i,{up:0,status:n.status,dnsLookupTime:t,tcpTime:r,sslTime:o,headers:n.getAllResponseHeaders()})),i}).catch(function(){return Object.assign({},i,{up:0,status:0})})}(n).then(o)}).then(r)}).then(w,v).then(function(){(e+=1)<h&&setTimeout(n,f)})})},3e3)}U(f,h,"desktop"),n=function(){var n=["bot","headless","google","baidu","bing","msn","duckduckbot","teoma","slurp","yandex","phantomjs","pingdom","ahrefsbot"].join("|");if(new RegExp(n,"i").test(window.navigator.userAgent))console.warn("PerfOps RUM not launching due to suspicious userAgent:",window.navigator.userAgent);else if(void 0!==window.performance){if(performance.onresourcetimingbufferfull=function(){w("clear performance resource buffer"),performance.clearResourceTimings()},"function"==typeof d)return k();!function(n,e){var t=document.createElement("script"),r=!1;t.onreadystatechange=t.onload=function(){r||e(),r=!0},t.setAttribute("src",n),document.body.appendChild(t)}("https://cdn.perfops.net/npm/es6-promise-4.2.4/dist/es6-promise.min.js",function(){d=window.ES6Promise,k()})}},"complete"===document.readyState?n():window.addEventListener("load",n)}(window.Promise);